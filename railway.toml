[build]
builder = "dockerfile"

[deploy]
startCommand = "node server.js"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 5

[deploy.variables]
NODE_ENV = "production"
NPM_CONFIG_PRODUCTION = "true"
NPM_CONFIG_FUND = "false"
NPM_CONFIG_AUDIT = "false"

# 增加构建超时时间
[build.variables]
RAILWAY_BUILD_TIMEOUT = "1800"